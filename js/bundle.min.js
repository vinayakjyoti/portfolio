const dlyFn = (e, t, o = {}) => {
  let n, i = 0;
  const {
    leading: l = !1,
    trailing: s = !0,
    maxWait: r
  } = o, a = (o, d) => {
    const c = Date.now() - i;
    c < t && c >= 0 ? n = setTimeout(a, t - c, o, d) : (n = null, !s || l && !r || e.apply(o, d))
  };
  return function(...o) {
    i = Date.now();
    const s = l && !n;
    n || (n = setTimeout(a, t, this, o)), s && e.apply(this, o)
  }
}, limitFn = (e, t, o = {}) => dlyFn(e, t, {
  ...o,
  maxWait: t
}), parallaxAboutBg = () => {
  const e = document.getElementById("about-parallax-img"),
    t = document.getElementById("about"),
    o = () => {
      window.scrollY + window.innerHeight - t.clientHeight / 1.2 > t.offsetTop && (e.style.transform = "translate3d(0, -100%, 0)", window.removeEventListener("scroll", o))
    };
  window.addEventListener("scroll", o)
}, animatePin = () => {
  const e = document.getElementById("footer-pin"),
    t = dlyFn((() => {
      const t = window.scrollY + window.innerHeight >= document.documentElement.offsetHeight - 10;
      e.classList.toggle("footer__pin--enter", t)
    }), 200);
  window.addEventListener("scroll", t)
}, heroAnimation = () => {
  const e = document.getElementById("box-wrapper"),
    t = document.getElementById("right-hand"),
    o = document.getElementById("left-hand"),
    n = document.getElementById("hero"),
    i = limitFn((() => {
      window.scrollY + window.innerHeight - n.clientHeight / 2.4 > n.offsetTop && (o.classList.add("main-hero__left-hand--move"), t.classList.add("main-hero__right-hand--move"), e.classList.add("hero__box--state-1"), window.removeEventListener("scroll", i))
    }), 250);
  window.addEventListener("scroll", i)
}, svgHover = () => {
  const e = document.getElementById("skills-grid");
  e.addEventListener("mouseover", (t => {
    t.target !== e && t.target.classList.remove("main-skills__svg--fill")
  })), e.addEventListener("mouseout", (t => {
    t.target !== e && t.target.classList.add("main-skills__svg--fill")
  }))
}, workGridAnimation = () => {
  const e = document.querySelectorAll(".main-work__item"),
    t = limitFn((() => {
      e.forEach(((o, n) => {
        window.scrollY - o.offsetTop > -150 && window.innerWidth < 720 && o.classList.contains("main-work__item--grow") && (o.classList.remove("main-work__item--grow"), n >= e.length - 1 && window.removeEventListener("scroll", t))
      }))
    }), 200);
  window.addEventListener("scroll", t)
}, checkForm = () => {
  const e = document.getElementById("input-message"),
    t = document.getElementById("input-email"),
    o = document.getElementById("about-form");
  document.getElementById("input-btn").addEventListener("click", (() => {
    if (t.value && e.value) {
      alert("Message ready to send, but form submission is currently disabled.");
      // Optional: o.reset();
    } else {
      alert("Can't proceed with empty email/message");
    }
  }))
}, scrollToSections = () => {
  Object.entries({
    ".header__link-skills": ".main-skills",
    ".header__link-work": ".main-work",
    ".header__link-about": ".main-about"
  }).forEach((([e, t]) => {
    const o = document.querySelector(e),
      n = document.querySelector(t);
    o.addEventListener("click", (() => {
      n.scrollIntoView({
        behavior: "smooth"
      })
    }))
  }))
};
document.addEventListener("DOMContentLoaded", (() => {
  parallaxAboutBg(), animatePin(), heroAnimation(), svgHover(), workGridAnimation(), checkForm(), scrollToSections()
}));